import{j as e,u as P,r as i,a as T}from"./index-DNj1_qxT.js";import{a as g}from"./index-DW_MHI2K.js";import{A as b}from"./ActivityPage-fKLvZNOX.js";function Z(){const n={show_timer:!1};return e.jsx("div",{children:e.jsx(b,{headerNavFields:n,contentFields:{left_content:e.jsx("div",{children:"LOADING ..."})},isDoublePanel:0})})}const _=({skill:n,testType:a,subject:x,id:o,displayNames:u})=>{const d=T(),c=h=>h==="writing"?e.jsx("svg",{className:"card-icon","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{"fill-rule":"evenodd",d:"M14 4.182A4.136 4.136 0 0 1 16.9 3c1.087 0 2.13.425 2.899 1.182A4.01 4.01 0 0 1 21 7.037c0 1.068-.43 2.092-1.194 2.849L18.5 11.214l-5.8-5.71 1.287-1.31.012-.012Zm-2.717 2.763L6.186 12.13l2.175 2.141 5.063-5.218-2.141-2.108Zm-6.25 6.886-1.98 5.849a.992.992 0 0 0 .245 1.026 1.03 1.03 0 0 0 1.043.242L10.282 19l-5.25-5.168Zm6.954 4.01 5.096-5.186-2.218-2.183-5.063 5.218 2.185 2.15Z","clip-rule":"evenodd"})}):h==="listening"?e.jsx("svg",{className:"card-icon","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{"fill-rule":"evenodd",d:"M12 5a7 7 0 0 0-7 7v1.17c.313-.11.65-.17 1-.17h2a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H6a3 3 0 0 1-3-3v-6a9 9 0 0 1 18 0v6a3 3 0 0 1-3 3h-2a1 1 0 0 1-1-1v-6a1 1 0 0 1 1-1h2c.35 0 .687.06 1 .17V12a7 7 0 0 0-7-7Z","clip-rule":"evenodd"})}):e.jsx("svg",{className:"card-icon","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{"fill-rule":"evenodd",d:"M11 4.717c-2.286-.58-4.16-.756-7.045-.71A1.99 1.99 0 0 0 2 6v11c0 1.133.934 2.022 2.044 2.007 2.759-.038 4.5.16 6.956.791V4.717Zm2 15.081c2.456-.631 4.198-.829 6.956-.791A2.013 2.013 0 0 0 22 16.999V6a1.99 1.99 0 0 0-1.955-1.993c-2.885-.046-4.76.13-7.045.71v15.081Z","clip-rule":"evenodd"})});return e.jsxs("div",{className:"selection-card clickable border-style-1",onClick:()=>d(`/test/intro/${n}/${n==="listening"?0:1}/${a}/${o}`),children:[e.jsxs("div",{className:"card-head flex-row",children:[c(n),e.jsx("div",{className:"card-skill",children:n.toUpperCase()})]}),e.jsxs("div",{className:"card-type",children:[e.jsx("b",{style:{fontWeight:900},children:u[a]})," - ",x]}),e.jsx("div",{className:"card-spacer"}),e.jsx("div",{children:e.jsx("button",{className:"card-button",children:"OPEN"})})]})};function I(){const{skill:n,testType:a}=P(),[x,o]=i.useState([]),[u,d]=i.useState([]),[c,h]=i.useState({}),[S,f]=i.useState(!0),[m,w]=i.useState(!1),[j,N]=i.useState(!1),[v,k]=i.useState(n),[C,$]=i.useState(a),A=T();if(i.useEffect(()=>{const t=async()=>{try{const l=await g.get(`http://127.0.0.1:8000/ieltsgo/api/selection/${n||""}${a?"/":""}${a||""}`);o(l.data),f(!1)}catch(l){console.error("Error fetching tests:",l),o([]),f(!1)}},s=async()=>{try{const y=(await g.get(`http://127.0.0.1:8000/ieltsgo/api/test_types/${n||""}`)).data.test_types;y.unshift("all"),d(y)}catch(l){console.error("Error fetching test types:",l),d(["all"])}},L=async()=>{try{const l=await g.get("http://127.0.0.1:8000/ieltsgo/api/test_type/names");h(l.data.display_names)}catch(l){console.error("Error fetching test types:",l)}};t(),s(),L()},[n,a]),S)return e.jsx("div",{children:e.jsx(Z,{})});const E={show_timer:!1},p=t=>{t==="skill"?(w(s=>!s),j&&N(s=>!s)):(N(s=>!s),m&&w(s=>!s))},r=(t,s)=>{console.log(t,s),k(t),$(s),A(`/test/selection/${t}${s&&s!=="all"?`/${s}`:""}`)};return e.jsx("div",{children:e.jsx(b,{headerNavFields:E,contentFields:{header:e.jsx("div",{className:"selection-header-container",children:e.jsx("div",{className:"selection-header flex-row",children:e.jsxs("div",{className:"dropdown-container flex-row",children:[e.jsxs("div",{className:"dropdown",children:[e.jsxs("button",{className:"dropdown-btn",onBlur:()=>p("skill"),onClick:()=>p("skill"),children:[e.jsx("span",{children:v?v.charAt(0).toUpperCase()+v.slice(1):"All"}),e.jsx("span",{className:`arrow ${m?"open":""}`})]}),e.jsxs("ul",{className:`dropdown-content ${m?"visible":""}`,children:[e.jsx("li",{onClick:()=>r("all"),children:"All"}),e.jsx("li",{onClick:()=>r("listening"),children:"Listening"}),e.jsx("li",{onClick:()=>r("reading"),children:"Reading"}),e.jsx("li",{onClick:()=>r("writing"),children:"Writing"})]})]}),e.jsxs("div",{className:"dropdown",children:[e.jsxs("button",{className:"dropdown-btn",onBlur:()=>p("test_type"),onClick:()=>p("test_type"),children:[e.jsx("span",{children:(c==null?void 0:c[C])??"All"}),e.jsx("span",{className:`arrow ${j?"open":""}`})]}),e.jsx("ul",{className:`dropdown-content custom-scroll ${j?"visible":""}`,children:u.map((t,s)=>e.jsx("li",{onClick:()=>r(n,t),children:c[t]},s))})]})]})})}),left_content:e.jsx("div",{className:"selection-grid-container",children:e.jsx("div",{className:"selection-grid custom-scroll",children:x.map((t,s)=>e.jsx(_,{skill:t.skill,testType:t.test_type,subject:t.subject,id:t.id,displayNames:c},t.id+"-"+t.subject))})})},isDoublePanel:0})})}export{I as default};
